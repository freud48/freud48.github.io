import{o as X,S as M,w as A,t as W,g as Y,u as k,a as p,E as d,q as N,U as O,c as $,V as j}from"./index.c5d38237.js";import{f as D}from"./use-router-link.9475169f.js";import{f as F,e as I,i as _}from"./scroll.7979daa8.js";function re(t,e,l){let r;function i(){r!==void 0&&(M.remove(r),r=void 0)}return X(()=>{t.value===!0&&i()}),{removeFromHistory:i,addToHistory(){r={condition:()=>l.value===!0,handler:e},M.add(r)}}}const le={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},ie=["beforeShow","show","beforeHide","hide"];function ne({showing:t,canShow:e,hideOnRouteChange:l,handleShow:r,handleHide:i,processOnMount:v}){const n=Y(),{props:s,emit:u,proxy:L}=n;let a;function R(o){t.value===!0?g(o):S(o)}function S(o){if(s.disable===!0||o!==void 0&&o.qAnchorHandled===!0||e!==void 0&&e(o)!==!0)return;const f=s["onUpdate:modelValue"]!==void 0;f===!0&&(u("update:modelValue",!0),a=o,k(()=>{a===o&&(a=void 0)})),(s.modelValue===null||f===!1)&&E(o)}function E(o){t.value!==!0&&(t.value=!0,u("beforeShow",o),r!==void 0?r(o):u("show",o))}function g(o){if(s.disable===!0)return;const f=s["onUpdate:modelValue"]!==void 0;f===!0&&(u("update:modelValue",!1),a=o,k(()=>{a===o&&(a=void 0)})),(s.modelValue===null||f===!1)&&P(o)}function P(o){t.value!==!1&&(t.value=!1,u("beforeHide",o),i!==void 0?i(o):u("hide",o))}function H(o){s.disable===!0&&o===!0?s["onUpdate:modelValue"]!==void 0&&u("update:modelValue",!1):o===!0!==t.value&&(o===!0?E:P)(a)}A(()=>s.modelValue,H),l!==void 0&&D(n)===!0&&A(()=>L.$route.fullPath,()=>{l.value===!0&&t.value===!0&&g()}),v===!0&&W(()=>{H(s.modelValue)});const q={show:S,hide:g,toggle:R};return Object.assign(L,q),q}let m=0,y,b,w,T=!1,C,z,U,c=null;function K(t){G(t)&&N(t)}function G(t){if(t.target===document.body||t.target.classList.contains("q-layout__backdrop"))return!0;const e=O(t),l=t.shiftKey&&!t.deltaX,r=!l&&Math.abs(t.deltaX)<=Math.abs(t.deltaY),i=l||r?t.deltaY:t.deltaX;for(let v=0;v<e.length;v++){const n=e[v];if(_(n,r))return r?i<0&&n.scrollTop===0?!0:i>0&&n.scrollTop+n.clientHeight===n.scrollHeight:i<0&&n.scrollLeft===0?!0:i>0&&n.scrollLeft+n.clientWidth===n.scrollWidth}return!0}function x(t){t.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function h(t){T!==!0&&(T=!0,requestAnimationFrame(()=>{T=!1;const{height:e}=t.target,{clientHeight:l,scrollTop:r}=document.scrollingElement;(w===void 0||e!==window.innerHeight)&&(w=l-e,document.scrollingElement.scrollTop=r),r>w&&(document.scrollingElement.scrollTop-=Math.ceil((r-w)/8))}))}function B(t){const e=document.body,l=window.visualViewport!==void 0;if(t==="add"){const{overflowY:r,overflowX:i}=window.getComputedStyle(e);y=F(window),b=I(window),C=e.style.left,z=e.style.top,U=window.location.href,e.style.left=`-${y}px`,e.style.top=`-${b}px`,i!=="hidden"&&(i==="scroll"||e.scrollWidth>window.innerWidth)&&e.classList.add("q-body--force-scrollbar-x"),r!=="hidden"&&(r==="scroll"||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar-y"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,p.is.ios===!0&&(l===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",h,d.passiveCapture),window.visualViewport.addEventListener("scroll",h,d.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",x,d.passiveCapture))}p.is.desktop===!0&&p.is.mac===!0&&window[`${t}EventListener`]("wheel",K,d.notPassive),t==="remove"&&(p.is.ios===!0&&(l===!0?(window.visualViewport.removeEventListener("resize",h,d.passiveCapture),window.visualViewport.removeEventListener("scroll",h,d.passiveCapture)):window.removeEventListener("scroll",x,d.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar-x"),e.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,e.style.left=C,e.style.top=z,window.location.href===U&&window.scrollTo(y,b),w=void 0)}function J(t){let e="add";if(t===!0){if(m++,c!==null){clearTimeout(c),c=null;return}if(m>1)return}else{if(m===0||(m--,m>0))return;if(e="remove",p.is.ios===!0&&p.is.nativeMobile===!0){c!==null&&clearTimeout(c),c=setTimeout(()=>{B(e),c=null},100);return}}B(e)}function se(){let t;return{preventBodyScroll(e){e!==t&&(t!==void 0||e===!0)&&(t=e,J(e))}}}const ue={dark:{type:Boolean,default:null}};function ae(t,e){return $(()=>t.dark===null?e.dark.isActive:t.dark)}const V={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Q=Object.keys(V);V.all=!0;function de(t){const e={};for(const l of Q)t[l]===!0&&(e[l]=!0);return Object.keys(e).length===0?V:(e.horizontal===!0?e.left=e.right=!0:e.left===!0&&e.right===!0&&(e.horizontal=!0),e.vertical===!0?e.up=e.down=!0:e.up===!0&&e.down===!0&&(e.vertical=!0),e.horizontal===!0&&e.vertical===!0&&(e.all=!0),e)}const Z=["INPUT","TEXTAREA"];function ce(t,e){return e.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof e.handler=="function"&&Z.includes(t.target.nodeName.toUpperCase())===!1&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(e.uid)===-1)}function fe(){if(window.getSelection!==void 0){const t=window.getSelection();t.empty!==void 0?t.empty():t.removeAllRanges!==void 0&&(t.removeAllRanges(),j.is.mobile!==!0&&t.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function pe(t,e,l){return l<=e?e:Math.min(l,Math.max(e,t))}function ve(t,e,l){if(l<=e)return e;const r=l-e+1;let i=e+(t-e)%r;return i<e&&(i=r+i),i===0?0:i}export{ue as a,ie as b,fe as c,ae as d,ne as e,re as f,de as g,pe as h,se as i,ve as n,ce as s,le as u};
